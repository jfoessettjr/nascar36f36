<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <title>YtseJammer - Admin</title>
  <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />

  <!-- Font Awesome icons (free version)-->
  <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>

  <!-- Google fonts-->
  <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet" />

  <!-- Core theme CSS (includes Bootstrap)-->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="css/styles.css" rel="stylesheet">
</head>

<body id="page-top">
  <!-- Navigation-->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
    <div class="container px-4 px-lg-5">
      <a class="navbar-brand" href="index.html">Ytsejammer</a>
      <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive"
        aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        Menu <i class="fas fa-bars"></i>
      </button>

      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ms-auto">
            <li class="nav-item"><a class="nav-link" href="index.html">Main</a></li>
            <li class="nav-item"><a class="nav-link" href="nascar36.html">Nascar 36 for 36</a></li>
            <li class="nav-item"><a class="nav-link" href="nascar-winners.html">Official Nascar Results</a></li>
            <li class="nav-item"><a class="nav-link" href="pga-winners.html">PGA Tour Results</a></li>
            <li class="nav-item"><a class="nav-link" href="library.html">Library</a></li>
            <li class="nav-item"><a class="nav-link" href="video-games.html">Video Games</a></li>
            <li class="nav-item"><a class="nav-link" href="vinyl.html">Vinyl</a></li>
            <!-- NEW: Admin page -->
            <li class="nav-item"><a class="nav-link" href="admin.html">Admin</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <main class="page-wrap">
    <div class="container px-4 px-lg-5">
      <div class="mb-4">
        <h1 class="mb-1">Admin</h1>
        <div class="muted">
          Writes are protected by <code>ADMIN_TOKEN</code> (sent as <code>x-admin-token</code> header).
        </div>
      </div>

      <!-- Token card -->
      <div class="card-lite mb-4">
        <div class="form-grid align-items-end">
          <div class="span-6">
            <label class="form-label" for="token">Admin token</label>
            <input id="token" type="password" class="form-control" placeholder="Paste admin token here" />
            <div class="muted mt-2">
              Stored in <code>sessionStorage</code> (clears when the browser tab is closed).
            </div>
          </div>

          <div class="span-6 actions">
            <button id="saveToken" class="btn btn-primary"><i class="fa-solid fa-key me-2"></i>Save token</button>
            <button id="clearToken" class="btn btn-outline-secondary"><i class="fa-solid fa-eraser me-2"></i>Clear</button>
          </div>
        </div>
      </div>

      <!-- Admin controls + form + table -->
      <div class="card-lite">
        <div class="form-grid align-items-end">
          <div class="span-4">
            <label class="form-label" for="dataset">Dataset</label>
            <select id="dataset" class="form-select">
              <option value="nascar36">NASCAR 36-for-36</option>
              <option value="nascarWinners">NASCAR Winners</option>
              <option value="pgaWinners">PGA Winners</option>
              <option value="books">Library (Books)</option>
              <option value="videoGames">Video Games</option>
              <option value="vinylRecords">Vinyl Records</option>
              </select>
          </div>

          <div class="span-4">
            <label class="form-label" for="seasonFilter">Season (sports tables)</label>
            <input id="seasonFilter" type="number" class="form-control" placeholder="e.g., 2025" />
          </div>

          <div class="span-4 actions">
            <button id="load" class="btn btn-primary"><i class="fa-solid fa-rotate me-2"></i>Load</button>
            <button id="clearFormTop" class="btn btn-outline-secondary"><i class="fa-solid fa-broom me-2"></i>Clear form</button>
          </div>
        </div>

        <div id="messages" class="ok mt-3"></div>
        <div id="error" class="error mt-2"></div>

        <!-- Dynamic form goes here -->
        <div id="formArea" class="mt-4"></div>

        <!-- Data table -->
        <div class="table-responsive mt-4">
          <table class="table table-striped table-bordered align-middle mb-0">
            <thead id="thead" class="table-light"></thead>
            <tbody id="tbody"></tbody>
          </table>
        </div>
      </div>

      <div class="muted mt-3">
        Tip: click a rowâ€™s <strong>Edit</strong> button to auto-fill the form. Use <strong>Update</strong> to save changes.
      </div>
    </div>
  </main>

  <!-- Bootstrap core JS-->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Core theme JS-->
  <script src="js/scripts.js"></script>

  <!-- Admin logic -->
  <script src="https://widget.cloudinary.com/v2.0/global/all.js"></script>
  <script src="js/admin.js"></script>
</body>
</html>
